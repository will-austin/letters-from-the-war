<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>October 4, 1944 | Letters from the War</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Special+Elite&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/letter.css">
</head>
<body>
    <div class="film-grain"></div>
    
    <header class="letter-header">
        <div class="header-content">
            <a href="../index.html" class="back-link">
                <span class="arrow">←</span>
                <span>Return to Archive</span>
            </a>
            <div class="header-title">
                <span class="star">★</span>
                <h1>Letters from the War</h1>
            </div>
        </div>
    </header>

    <main class="letter-container">
        <!-- Letter Metadata Section -->
        <section class="letter-metadata">
            <div class="metadata-grid">
                <div class="metadata-primary">
                    <div class="date-block">
                        <span class="date-label">DATE</span>
                        <span class="date-value">October 4, 1944</span>
                    </div>
                    <div class="location-block">
                        <span class="location-label">FROM</span>
                        <span class="location-value">Neckargartach, Heilbronn, Germany</span>
                    </div>
                </div>
                
                <div class="metadata-secondary">
                    <div class="metadata-item">
                        <span class="meta-label">FROM:</span>
                        <span class="meta-value">CPL Chester Shiver</span>
                    </div>
                    <div class="metadata-item">
                        <span class="meta-label">TO:</span>
                        <span class="meta-value">Mrs. Mae Shiver</span>
                    </div>
                    <div class="metadata-item">
                        <span class="meta-label">ADDRESS:</span>
                        <span class="meta-value">Route 1 Box 128B, Bluff Springs, Fla.</span>
                    </div>
                    <div class="metadata-item">
                        <span class="meta-label">PAGES:</span>
                        <span class="meta-value">2</span>
                    </div>
                </div>
                
                <div class="metadata-topics">
                    <span class="topics-label">TOPICS:</span>
                    <div class="topics-list">
                        <span class="topic-tag">Coming Home</span>
                        <span class="topic-tag">Family</span>
                        <span class="topic-tag">Red Cross</span>
                        <span class="topic-tag">Guard Duty</span>
                    </div>
                </div>
            </div>
            
            <div class="censor-stamp">
                <span>PASSED</span>
                <span>BY</span>
                <span>CENSOR</span>
            </div>
        </section>

        <!-- Letter Content: Image + Transcription -->
        <section class="letter-content">
            <div class="letter-scan">
                <div class="scan-wrapper">
                    <div class="scan-image-container">
                        <img 
                            src="../images/scans/100444/100444_1.png" 
                            alt="Letter from Chester Shiver dated October 4, 1944 - Page 1" 
                            class="scan-image"
                            id="letter-scan"
                            data-page="1"
                        >
                    </div>
                </div>
                <div class="page-navigation">
                    <button class="page-btn" id="prev-page" disabled>← Previous</button>
                    <span class="page-indicator">Page <span id="current-page">1</span> of <span id="total-pages">2</span></span>
                    <button class="page-btn" id="next-page">Next →</button>
                </div>
                <div class="scan-controls">
                    <button class="scan-btn" id="enlarge-btn" title="View Full Size">
                        <span>⊕</span> View Full Size
                    </button>
                    <span class="scan-info">Click to view high-resolution scan</span>
                </div>
            </div>
            
            <div class="letter-transcription">
                <div class="transcription-header">
                    <h2>Transcription</h2>
                    <div class="typewriter-icon">⌨</div>
                </div>
                
                <div class="transcription-body">
                    <div class="letter-salutation">
                        Dear Mother,
                    </div>
                    
                    <div class="letter-text">
                        <p>Just a line to let you know that I'm fine. I have a little cold, but nothing bad.</p>
                        
                        <p>Mother, I think I get to come home next month. I'm supposed to leave around the 15th of this month. Maybe this time I'll come with the outfit.</p>
                        
                        <p>I got the letter from you with the stamps and the stuff. The stamps sure came in handy too—I didn't have a one.</p>
                        
                        <p>I hope my babies are alright by now. The Red Cross sent me a copy of a cablegram from the Red Cross at home. They said, "Baby improving" but it didn't request my presence at home. It said that Dr. John reported that.</p>
                        
                        <p>I'm on guard today and it's time for one to go on. It's only 8 A.M. now.</p>
                        
                        <p>Be sweet and tell all hello for me.</p>
                    </div>
                    
                    <div class="letter-closing">
                        <p>Love,</p>
                        <p class="signature">Chester</p>
                    </div>
                </div>
                
                <div class="transcription-notes">
                    <h3>Archival Notes</h3>
                    <p>This letter was written from Neckargartach, a district of Heilbronn in southern Germany. Chester expresses hope about coming home soon and mentions communication with the Red Cross regarding family back home. The letter shows the pre-printed address of his mother, Mrs. Mae Shiver, in Bluff Springs, Florida.</p>
                </div>
            </div>
        </section>

        <!-- Navigation -->
        <nav class="letter-nav">
            <a href="#" class="nav-link prev disabled">
                <span class="nav-arrow">←</span>
                <span class="nav-text">Previous Letter</span>
            </a>
            <a href="../index.html" class="nav-link home">
                <span class="nav-text">All Letters</span>
            </a>
            <a href="letter-002.html" class="nav-link next">
                <span class="nav-text">Next Letter</span>
                <span class="nav-arrow">→</span>
            </a>
        </nav>
    </main>

    <!-- Lightbox for full-size image viewing -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightbox-close">✕ Close</button>
            <button class="lightbox-nav lightbox-prev" id="lightbox-prev">←</button>
            <img src="" alt="Full size letter scan" class="lightbox-image" id="lightbox-image">
            <button class="lightbox-nav lightbox-next" id="lightbox-next">→</button>
        </div>
    </div>

    <footer class="main-footer">
        <div class="footer-content">
            <p>Austin Family Archive • <a href="https://willaustin.net">willaustin.net</a></p>
            <p class="footer-note">Preserving History, One Letter at a Time</p>
        </div>
    </footer>

    <script>
        // Letter pages configuration
        const pages = [
            '../images/scans/100444/100444_1.png',
            '../images/scans/100444/100444_2.png'
        ];
        let currentPage = 1;
        const totalPages = pages.length;

        // DOM elements
        const scanImage = document.getElementById('letter-scan');
        const prevBtn = document.getElementById('prev-page');
        const nextBtn = document.getElementById('next-page');
        const currentPageSpan = document.getElementById('current-page');
        const totalPagesSpan = document.getElementById('total-pages');
        const enlargeBtn = document.getElementById('enlarge-btn');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        const lightboxClose = document.getElementById('lightbox-close');
        const lightboxPrev = document.getElementById('lightbox-prev');
        const lightboxNext = document.getElementById('lightbox-next');

        // Update page display
        function updatePage() {
            scanImage.src = pages[currentPage - 1];
            scanImage.alt = `Letter from Chester Shiver dated October 4, 1944 - Page ${currentPage}`;
            currentPageSpan.textContent = currentPage;
            
            prevBtn.disabled = currentPage === 1;
            nextBtn.disabled = currentPage === totalPages;
            
            if (lightbox.classList.contains('active')) {
                lightboxImage.src = pages[currentPage - 1];
            }
        }

        // Page navigation
        prevBtn.addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                updatePage();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            }
        });

        // Lightbox functionality
        enlargeBtn.addEventListener('click', () => {
            lightboxImage.src = pages[currentPage - 1];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        scanImage.addEventListener('click', () => {
            lightboxImage.src = pages[currentPage - 1];
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        lightboxClose.addEventListener('click', () => {
            lightbox.classList.remove('active');
            document.body.style.overflow = '';
        });

        lightbox.addEventListener('click', (e) => {
            if (e.target === lightbox) {
                lightbox.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        lightboxPrev.addEventListener('click', (e) => {
            e.stopPropagation();
            if (currentPage > 1) {
                currentPage--;
                updatePage();
            }
        });

        lightboxNext.addEventListener('click', (e) => {
            e.stopPropagation();
            if (currentPage < totalPages) {
                currentPage++;
                updatePage();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (lightbox.classList.contains('active')) {
                if (e.key === 'Escape') {
                    lightbox.classList.remove('active');
                    document.body.style.overflow = '';
                } else if (e.key === 'ArrowLeft' && currentPage > 1) {
                    currentPage--;
                    updatePage();
                } else if (e.key === 'ArrowRight' && currentPage < totalPages) {
                    currentPage++;
                    updatePage();
                }
            }
        });

        // Initialize
        totalPagesSpan.textContent = totalPages;
        scanImage.style.cursor = 'pointer';
    </script>
</body>
</html>
